#!/usr/bin/env ruby
# frozen_string_literal: true

require "bundler/setup"
require "dotenv"
Dotenv.load("../.env")
require "soldoni"
require "rufus-scheduler"
require "tzinfo"
require "logger"

scheduler = Rufus::Scheduler.new
logger = Logger.new($stdout)

logger.info "Starting Scheduler"

scheduler.cron "00 18 * * *" do
  puts "[#{Time.now}] Calcolando i ğŸ’°ğŸ’°ğŸ’° SOLDONI ğŸ’°ğŸ’°ğŸ’° ..."

  Soldoni.fetch_and_notify
end

scheduler.join
